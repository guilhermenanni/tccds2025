
create database db_draftme;
use db_draftme;

#drop database db_draftme;


create table tb_time (
    id_time int auto_increment primary key,
    nm_time varchar(90) not null,
    time_cnpj varchar(14), -- opcional, pois pode haver times amadores
    categoria_time varchar(20) not null,
    esporte_time varchar(90),
    localizacao_time varchar(100)
);

create table tb_usuario (
    id_usuario int auto_increment primary key,
    nm_usuario varchar(90) not null,
    senha_usuario varchar(90) not null,
    cpf_usuario varchar(11) not null,
    email_usuario varchar(100) not null,
    dt_nasc_usuario date not null,
    tel_usuario varchar(12),
    adm_time tinyint(1), -- 0 = não é dono de time, 1 = é dono
    id_time int, -- pode ser nulo, pois nem todo usuário pertence a um time
    foreign key (id_time) references tb_time(id_time)
);


alter table tb_time add column id_usuario int not null;
alter table tb_time add constraint fk_time_usuario
    foreign key (id_usuario) references tb_usuario(id_usuario);


create table tb_postagem (
    id_postagem int auto_increment primary key,
    texto_postagem varchar(255),
    img_postagem varchar(255),
    categoria varchar(20),
    data_postagem timestamp default current_timestamp,
    tag varchar(40),
    id_usuario int not null,
    foreign key (id_usuario) references tb_usuario(id_usuario)
);


create table tb_resposta_postagem (
    id_resposta int auto_increment primary key,
    id_usuario int not null,
    id_postagem int not null,
    texto_resposta varchar(230),
    foreign key (id_usuario) references tb_usuario(id_usuario),
    foreign key (id_postagem) references tb_postagem(id_postagem)
);


create table tb_chat (
    id_chat int auto_increment primary key,
    id_usuario int not null,
    texto_mensagem varchar(400),
    foreign key (id_usuario) references tb_usuario(id_usuario)
);

select * from tb_usuario;
select * from tb_time;

/*
guilherme VAI SE FUDE SEU AUTISTA DO CARALHO O BANCO TAVA TODO FUDIDO VAI TOMA NO CU
TINHA NEM SENHA NA PARTE DO USUARIO SEU IMUNDO DO KRL O BGL NEM FUNCIONAVA MACACO e draftme tava escrito errado 
*/

